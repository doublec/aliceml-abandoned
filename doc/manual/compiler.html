<?php include("macros.php3"); ?>
<?php heading("Batch compiler", "batch\ncompiler") ?>

<?php section("overview", "overview") ?>

<P>The standalone batch compiler is used to produce <A
href="components.html">components</A> from source files.</A>


<?php section("synopsis", "synopsis") ?>

<DL>
  <DT><TT>alicec</TT> [<I>&lt;options&gt;</I>] [<TT>-c</TT>]
    <I>&lt;input file&gt;</I> [<TT>-o</TT> <I>&lt;output file&gt;</I>]</DT>
<!--
  <DT><TT>alicec</TT> [<I>&lt;options&gt;</I>] <TT>-x</TT>
    <I>&lt;input file&gt;</I> [<TT>-o</TT> <I>&lt;output file&gt;</I>]</DT>
-->
</DL>


<?php section("description", "description") ?>

<P>The <I>&lt;input file&gt;</I> is compiled as an Alice source program and a
corresponding component is written as output.  If <I>&lt;output file&gt;</I> is
given, it is used as the output file name, else the basename of <I>&lt;input
file&gt;</I> is used with <TT>.ozf</TT> as extension. Compiled components can
be executed by invoking the <A href="machine.html">virtual machine</A>.</P>

<P><I>&lt;input file&gt;</I> may be a URL.  See <A
href="#environment-variables">below</A> for notes on how it is
interpreted. <I>&lt;output file&gt;</I> may only be omitted if
<I>&lt;input file&gt;</I> represents a local file.</P>

<P>If <I>&lt;input file&gt;</I> has the file extension <TT>.sml</TT> or
<TT>.sig</TT>, then the compiler looks for a file with the same name but the
extension <TT>.import</TT>. If found, the contents of that file is prepended to
the actual input file. That feature allows putting import announcements into
separate files and hence easier source exchange between Alice and other
Standard ML systems, which employ different approaches for separate
compilation.</P>

<!--
<P>In the second form, <I>&lt;input file&gt;</I> is compiled as an Alice source
and an executable component is written as output.  If <I>&lt;output
file&gt;</I> is given, it is used as the output file name, else the basename of
<I>&lt;input file&gt;</I> is used, without extension.</P>
-->

<P>To compile a component, the compiler requires access to all imported
component files. If one does not exist, but a source file for it
(i.e., a file with same name but ending in <TT>.aml</TT>, <TT>.sml</TT>,
or <TT>.sig</TT>) can be located, the compiler first invokes itself
recursively to compile the imported component.  If a component <EM>does</EM>
exist, the compiler does <EM>not</EM> perform any check to verify whether it is
up-to-date. External tools like <TT>make</TT> have to be used, in conjunction
with the <A href="depend.html">dependency analyzer</A>, to ensure proper
recompilation if necessary.</P>

<?php if ($platform != "seam") { ?>
<P>It is possible to import Mozart components (<A
href="http://www.mozart-oz.org/documentation/apptut/node3.html">Mozart
"functors"</A>), as long as they are augmented with an Alice signature file.
See the <A href="interop.html">interop section</A> for details.</P>
<?php } ?>


<?php section("options", "options") ?>

<DL>
  <DT><TT>--version</TT></DT>
  <DD><P>Print compiler version.</P></DD>
  <DT><TT>--(no-)dump-phases</TT></DT>
  <DD><P>Trace compilation phases.</P></DD>
  <DT><TT>--(no-)dump-elaboration-sig</TT></DT>
  <DD><P>Output component's export signature.</P></DD>
  <DT><TT>--(no-)warn-conventions</TT></DT>
  <DD><P>Warn about violations of standard naming conventions (on by default).</P></DD>
  <DT><TT>--(no-)warn-shadowing</TT></DT>
  <DD><P>Warn about shadowing of identifiers (off by default,
  gives a lot of spurious warnings).</P></DD>
</DL>


<?php section("environment-variables", "environment variables") ?>

<P>The batch compiler is parameterized by the same environment variables
as the <A href="machine.html#environment-variables">virtual machine</A>,
plus:</P>

<DL>
  <DT><TT>ALICE_SOURCE_PATH</TT>
  <DD><P>specifies how source file URLs are interpreted.  If set, the value
    of this environment variable is parsed by the <TT>parse</TT> method of
    the <A href="library/resolver.html#Handler"><TT>Resolver.Handler</TT></A>
    structure.  If not set, uses only the default identity method.</P>
</DL>


<?php footing() ?>
